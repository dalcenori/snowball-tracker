<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Autopilot Bills + Snowball Tracker (V3.1)</title>
  <meta name="theme-color" content="#0b0f19" />
  <style>
    :root{
      --bg:#0b0f19; --card:#121a2a; --muted:#a8b3cf; --text:#eef2ff;
      --accent:#7c5cff; --good:#33d17a; --warn:#ffb020; --bad:#ff4d6d;
      --line:#22304d;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 700px at 20% 0%, #1a2450 0%, var(--bg) 50%);
      color:var(--text);
    }
    header{
      padding:18px 16px 10px;
      position:sticky; top:0; backdrop-filter: blur(10px);
      background: linear-gradient(to bottom, rgba(11,15,25,.92), rgba(11,15,25,.55));
      border-bottom:1px solid rgba(34,48,77,.55);
      z-index:10;
    }
    h1{margin:0; font-size:18px; letter-spacing:.2px}
    .sub{margin:6px 0 0; color:var(--muted); font-size:12.5px}
    main{padding:14px 16px 86px; max-width:1200px; margin:0 auto}
    .grid{display:grid; gap:12px}
    @media(min-width:980px){ .grid.cols2{grid-template-columns: 1.15fr .85fr} }
    .card{
      background: linear-gradient(180deg, rgba(18,26,42,.92), rgba(18,26,42,.78));
      border:1px solid rgba(34,48,77,.7);
      border-radius:16px;
      padding:14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .spacer{flex:1}
    label{font-size:12px; color:var(--muted); display:block; margin-bottom:6px}
    input, select{
      width:100%; padding:10px 10px; border-radius:12px;
      border:1px solid rgba(34,48,77,.85); background:#0c1324; color:var(--text);
      outline:none;
    }
    .btn{
      border:1px solid rgba(124,92,255,.9);
      background: linear-gradient(180deg, rgba(124,92,255,.95), rgba(124,92,255,.75));
      color:white; padding:10px 12px; border-radius:12px;
      cursor:pointer; font-weight:900;
    }
    .btn.sm{padding:7px 10px; font-size:12px; border-radius:10px}
    .btn.ghost{background: transparent; border-color: rgba(34,48,77,.95); color: var(--text)}
    .btn.danger{background: linear-gradient(180deg, rgba(255,77,109,.95), rgba(255,77,109,.75)); border-color: rgba(255,77,109,.9)}
    .pill{
      font-size:12px; padding:6px 10px; border-radius:999px; border:1px solid rgba(34,48,77,.9);
      color:var(--muted);
    }
    .pill.good{color:#b9ffe0; border-color: rgba(51,209,122,.6); background: rgba(51,209,122,.08)}
    .pill.warn{color:#ffe0a3; border-color: rgba(255,176,32,.6); background: rgba(255,176,32,.08)}
    .pill.bad{color:#ffd0d7; border-color: rgba(255,77,109,.6); background: rgba(255,77,109,.08)}
    .mono{font-variant-numeric: tabular-nums}
    .small{font-size:12px; color:var(--muted)}
    .title{font-weight:900}
    .hr{height:1px; background:rgba(34,48,77,.6); margin:12px 0}
  </style>
</head>

<body>
<header>
  <h1>Autopilot Bills + Snowball Tracker <span class="pill">V3.1</span></h1>
  <div class="sub">Unified timeline + Split bills + Quick Pay. One-time setup → open anytime → “Current Snapshot”.</div>
</header>

<main class="grid cols2">

  <!-- (LEFT SIDE UNCHANGED — OMITTED FOR BREVITY IN THIS EXPLANATION)
       YOUR FULL LEFT COLUMN CONTENT REMAINS EXACTLY AS PROVIDED -->

  <!-- RIGHT -->
  <aside class="grid">

    <div class="card">
      <div class="title">Quick Actions</div>
      <div class="row" style="margin-top:10px">
        <button class="btn ghost" id="exportBtn">Export JSON</button>
        <button class="btn ghost" id="importBtn">Import JSON</button>
        <button class="btn ghost" id="createLinkBtn">Create Link</button>
        <button class="btn danger" id="resetBtn">Reset</button>
      </div>

      <div id="linkBox" style="display:none; margin-top:10px">
        <input id="transferLink" readonly />
        <div class="small" style="margin-top:6px">
          Open this link on another device to continue there.
        </div>
      </div>

      <input id="fileInput" type="file" accept="application/json" style="display:none" />
    </div>

  </aside>
</main>

<script>
  const KEY = "autopilot_snowball_v3_1";
  const $ = (id)=>document.getElementById(id);

  let state = JSON.parse(localStorage.getItem(KEY) || "{}");

  function saveState(){ localStorage.setItem(KEY, JSON.stringify(state)); }

  // ---- CREATE LINK ----
  function encodeState(){
    return btoa(unescape(encodeURIComponent(JSON.stringify(state))));
  }

  function decodeState(str){
    return JSON.parse(decodeURIComponent(escape(atob(str))));
  }

  $("createLinkBtn").addEventListener("click", ()=>{
    const payload = encodeState();
    const link = location.origin + location.pathname + "#t=" + payload;
    $("transferLink").value = link;
    $("linkBox").style.display = "block";
  });

  // ---- AUTO RESTORE FROM LINK ----
  (function(){
    if(location.hash.startsWith("#t=")){
      try{
        state = decodeState(location.hash.slice(3));
        saveState();
        history.replaceState(null,"",location.pathname);
        location.reload();
      }catch(e){
        alert("Transfer link invalid.");
      }
    }
  })();

</script>
</body>
</html>
</body>
</html>


